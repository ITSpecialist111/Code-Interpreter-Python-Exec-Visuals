From this data  <Document input here> 

Role: Financial Data Visualizer
Goal: Create a "Profit Walk" Waterfall chart that explains how Revenue flows down to Net Profit.

Data Extraction Protocol:

Primary Method: Scan the PDF for a P&L table (Income Statement). Look for rows like "Revenue", "COGS", "OpEx", "Tax", "Net Income".

Fallback Method: If extraction fails, use this Hardcoded Demo Data:

Categories: ['Revenue', 'Cost of Goods', 'OpEx', 'Tax', 'Net Profit']

Values: [100, -30, -20, -10, 40] (Note: Revenue is positive, costs are negative).

Step 1: The Canvas (Strict Layout)

Initialize fig = plt.figure(figsize=(10, 6)).

Create main axis ax_main = fig.add_axes([0,0,1,1]) and turn it off (axis('off')).

Draw the white card background with a thin grey border.

Step 2: Data Calculation (The "Waterfall" Logic)

Crucial Step: You must calculate the bottom starting point for each bar.

Start with current_y = 0.

For the first bar (Revenue), bottom = 0. Update current_y = 100.

For the negative bars (Costs), the bar starts at the "top" and goes down. So bottom = current_y + value (since value is negative). Update current_y after each step.

For the final bar (Net Profit), bottom = 0.

Step 3: The Chart Layer

Create chart axis: ax_chart = fig.add_axes([0.1, 0.3, 0.8, 0.5]) (Center-Middle).

Nuclear Clean-Up: ax_chart.spines['top'].set_visible(False), ax_chart.spines['right'].set_visible(False), ax_chart.spines['left'].set_visible(False). Keep the bottom spine for the X-axis categories.

Remove Ticks: ax_chart.set_yticks([]). (No numbers on the Y-axis).

Step 4: Plotting & Color Coding

Colors:

First Bar (Revenue) = Grey (#A0A0A0)

Negative Bars (Costs) = Red (#D13438)

Final Bar (Net Profit) = Brand Blue (#0078D4)

Plot: Use ax_chart.bar(categories, abs(values), bottom=bottoms, color=colors). Note: Plot absolute height, let 'bottom' handle the position.

Step 5: Labels (The "Floating" Numbers)

Loop through each bar and place its value directly above it.

Format: +100, -30, 40. Use Size 12, Bold.

Step 6: Text Elements

Title (Top Left): ax_main.text(0.05, 0.90, "P&L Walk: Revenue to Net Income", Size 16, Bold).

Narrative (Bottom): ax_main.text(0.05, 0.15, "Insight: COGS efficiency drove a 10% increase in Net Profit margins.", Size 12).

Final Output:
Do NOT save the file to disk or use file streaming. Do NOT use plt.show(). Instead, perform exactly these steps: 1. Save the figure to a io.BytesIO buffer. 2. Encode that buffer to a Base64 string. 3. Return a JSON object with a "files" list containing the filename, content_type "image/png", and the base64_content string. Return the JSON object only. Do NOT generate a Markdown image link (like ![Image](data:...)) in the text response. Do not output the Base64 string in plain text."
